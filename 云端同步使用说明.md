# 云端同步功能使用说明

## 功能介绍

云端同步功能使用GitHub Gist作为免费的云端存储服务，让您的账号数据可以在不同浏览器、不同设备间自动同步。

## 配置步骤

### 方法一：创建新的云端存储

1. **获取GitHub访问令牌**
   - 访问 [GitHub Personal Access Tokens](https://github.com/settings/tokens)
   - 点击 "Generate new token" → "Generate new token (classic)"
   - 填写Token名称，如："产品文档系统同步"
   - 选择权限：只需勾选 `gist` (Create gists)
   - 点击 "Generate token"
   - **重要：复制生成的token，离开页面后将无法再次查看**

2. **配置同步**
   - 以admin账号登录产品文档系统
   - 点击"账号管理"按钮
   - 在"云端同步"部分，将token粘贴到输入框
   - 点击"配置同步"按钮
   - 系统会自动创建Gist并上传当前账号数据

### 方法二：连接现有的云端数据

如果您已经在其他浏览器配置过云端同步：

1. **获取Gist ID**
   - 在已配置的浏览器中，查看"云端同步"部分显示的Gist ID
   - 或者访问您的GitHub Gists页面查找相关Gist

2. **连接数据**
   - 在新浏览器中输入Gist ID
   - 点击"连接"按钮
   - 选择是否合并账号数据或替换本地数据

## 使用功能

### 上传到云端
- 当您添加、删除或修改账号后，点击"📤 上传到云端"
- 将本地最新的账号数据同步到云端

### 从云端下载
- 点击"📥 从云端下载"
- 将云端的账号数据下载并覆盖本地数据
- **注意：此操作会覆盖本地账号，请谨慎使用**

### 清除配置
- 点击"清除配置"可以移除云端同步设置
- 不会删除云端的Gist数据，只是断开本地连接

## 安全说明

1. **GitHub Token安全**
   - Token只存储在浏览器本地，不会上传到任何服务器
   - 建议定期更换Token
   - 如果Token泄露，请立即在GitHub删除该Token

2. **数据安全**
   - Gist设置为私有，只有您可以访问
   - 账号密码以明文存储在Gist中，请确保GitHub账号安全
   - 建议使用强密码和两步验证保护GitHub账号

3. **访问权限**
   - Token只需要gist权限，不会访问您的其他GitHub数据
   - 可以随时在GitHub撤销Token权限

## 故障排除

### 配置失败
- 检查Token是否正确复制
- 确认Token具有gist权限
- 检查网络连接是否正常

### 上传/下载失败
- 检查Token是否过期
- 确认Gist是否存在
- 检查网络连接

### 连接现有Gist失败
- 确认Gist ID是否正确
- 检查Gist是否为私有且您有访问权限
- 确认Gist包含accounts.json文件

## 技术原理

- 使用GitHub Gist API进行数据存储和同步
- 数据格式：JSON格式存储账号信息和元数据
- 本地存储：Token和Gist ID保存在浏览器localStorage中
- 网络请求：直接调用GitHub API，无需中间服务器

## 限制说明

- 免费GitHub账号的Gist没有数量限制
- 单个Gist文件大小限制为1MB（足够存储数千个账号）
- API请求频率限制：每小时5000次（对于认证用户）
- 需要稳定的网络连接访问GitHub

## 常见问题

**Q: 如果忘记了Gist ID怎么办？**
A: 访问 https://gist.github.com 查看您的所有Gist，找到描述为"产品文档系统账号数据"的Gist。

**Q: 可以在多个设备间同步吗？**
A: 可以，只要使用相同的GitHub Token和Gist ID即可。

**Q: 如果GitHub Token过期了怎么办？**
A: 重新生成Token并在系统中重新配置即可。

**Q: 数据会被其他人看到吗？**
A: 不会，Gist设置为私有，只有您可以访问。但请保护好您的GitHub账号安全。